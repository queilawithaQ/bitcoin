<!DOCTYPE html>
<html lang="en">
    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-20141016-22" type="text/javascript"></script>

        <title>Guide to Web Authentication</title>
        <link rel="icon" href="/dist/images/favicon.png">
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Guide to Web Authentication">
        <meta property="og:url" content="https://webauthn.guide">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:creator" content="@subyraman">
        <meta property="og:title" content="Guide to Web Authentication">
        <meta name="twitter:title" content="Guide to Web Authentication">

        <meta name="twitter:image" content="https://webauthn.guide/dist/images/webauthn-meta-image.jpg" >
        <meta property="og:image" content="https://webauthn.guide/dist/images/webauthn-meta-image.jpg" >
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">


        
        <meta name="description" content="An introduction to Web Authentication (WebAuthn), the new API that can replace passwords with strong authentication.">
        <meta property="og:description" content="An introduction to Web Authentication (WebAuthn), the new API that can replace passwords with strong authentication.">
        <meta name="twitter:description" content="An introduction to Web Authentication (WebAuthn), the new API that can replace passwords with strong authentication.">

        <link href="/dist/css/index.css" rel="stylesheet" />
        
    </head>
    <body>
        <div id="main">
            
                <div class="container" data-reactroot=""><div class="row"><div class="sidebar d-none d-md-block d-xl-block d-lg-block col-2"><nav class="sidebar-container pt-3"><div class="row-link my-1 selected row"><a href="#intro">Introduction</a></div><div class="row-link my-1 row"><a href="#about-webauthn">About WebAuthn</a></div><div class="row-link my-1 row"><a href="#webauthn-api">WebAuthn API</a></div><div class="row-link my-1 pl-3 row"><a href="#registration">Registering</a></div><div class="row-link my-1 pl-3 row"><a href="#authentication">Authenticating</a></div><div class="row-link my-1 row"><a href="#looking-ahead">Looking Ahead</a></div></nav></div><div class="main-content col-md-10"><main><div id="intro" class="section"><div class="hero"><div class="row"><div class="hero-left order-2 col-lg-5 order-lg-1"><h1>WebAuthn</h1><h5>A better alternative for securing our sensitive information online</h5></div><div class="hero-right order-1 col-lg-7 order-lg-2"><img role="presentation" alt="" src="/dist/images/illi-hero-copy.svg"/></div></div></div><div class="intro-body mb-5"><div class="row"><div class="col-10"><h2>Our online existence is built on passwords.</h2></div></div><div class="row"><div class="col-lg-6"><h4>Often a password is all that lies between a malicious user and our bank accounts, social media accounts, and other sensitive data.</h4><p>Passwords have an ever-growing list of problems associated with them, both for users and developers.  Users have to worry about passwords being stolen by phishing tools, or their passwords being leaked online if websites they have accounts with are compromised. They have to worry about creating and remembering passwords without dedicated password management tools. Developers have to worry about all the complications of passing passwords through systems and safely storing them in databases.</p></div><div class="key-burden-image-container col-lg-5"><img role="presentation" alt="" src="/dist/images/illi-key-burden.svg"/></div></div></div><div class="mb-5 row"><div class="results-are-clear col-lg-11"><div class="results-are-clear-oval-container"><div><img role="presentation" alt="" src="/dist/images/oval-10.svg"/></div></div><div class="col-lg-8"><h3 class="p-0 m-0">The results are clear.</h3><div class="px-3 row"><div class="left d-flex align-content-center col-3"><h3><span class="number">81</span><span>%</span></h3></div><div class="col-9 results-are-clear-copy"><p class="p-0 m-0 results-are-clear-header">of all hacking-related breaches <a rel="noopener" href="https://www.verizonenterprise.com/resources/reports/2017_dbir_en_xg.pdf" target="_blank">leverage stolen or weak passwords.</a></p></div></div></div></div></div><div class="shared-secret row"><div class="order-2 col-lg-5"><img role="presentation" alt="" src="/dist/images/illi-secret-copy.svg"/></div><div class="order-1 col-lg-5"><h5>One of the primary weaknesses of password-based
                authentication is that a password is a shared secret.</h5><p>The password is the single key that proves you are in fact you.
            If a hacker manages to steal it, they can fully impersonate you unless you are one of the <a href="https://duo.com/blog/state-of-the-auth-experiences-and-perceptions-of-multi-factor-authentication">28% of users using two-factor authentication.</a></p></div></div><div class="way-forward row"><div class="col-sm-8 offset-sm-4"><h2>There is a better way forward.</h2></div></div><div class="row"><div class="way-forward-container"><img role="presentation" alt="" src="/dist/images/illi-way-forward.svg"/></div></div></div><div class="section" id="about-webauthn"><div class="row"><div class="col-sm-12"><h3 class="mb-3">Introducing Public Key Cryptography and Web Authentication (WebAuthn)</h3></div></div><div class="webauthn-description row"><div class="col-lg-12 col-xl-7"><h5 class="mb-3">The Web Authentication API (also known as WebAuthn) is a <a href="https://w3c.github.io/webauthn/">specification</a> written by the <a rel="noopener" href="https://www.w3.org/" target="_blank">W3C</a> and <a rel="noopener" href="https://fidoalliance.org" target="_blank">FIDO</a>, with the participation of Google, Mozilla, Microsoft, Yubico, and others. The API allows servers to register and authenticate users using public key cryptography instead of a password. </h5><p>It allows servers to integrate with the strong authenticators now built into devices, like Windows Hello or Apple’s Touch ID. Instead of a password, a private-public keypair (known as a <b>credential</b>) is created for a website. The private key is stored securely on the user’s device; a public key and randomly generated credential ID is sent to the server for storage. The server can then use that public key to prove the user’s identity.</p><p>The public key is not secret, because it is effectively useless without the corresponding private key. The fact that the server receives no secret has far-reaching implications for the security of users and organizations. Databases are no longer as attractive to hackers, because the public keys aren’t useful to them.</p><p>WebAuthn is part of the <a rel="noopener" href="https://duo.com/blog/developments-to-webauthn-and-the-fido2-framework" target="_blank">FIDO2 framework</a>, which is a set of technologies that enable passwordless authentication between servers, browsers, and authenticators. As of January 2019, WebAuthn is supported on Chrome, Firefox, and Edge, and Safari.</p></div><div class="col-md-8 offset-md-3 col-lg-6 offset-lg-3 col-xl-5 offset-xl-0"><div class="what-is-public-key-cryptography row"><div class="row"><img role="presentation" alt="" src="/dist/images/key-pair.svg"/></div><div class="pkc-description col-sm-12"><div class="what-is-pkc-description"><div class="bg-oval"><img src="/dist/images/oval-5.svg" role="presentation" alt=""/></div><h5>What is Public Key Cryptography?</h5><p>Public key cryptography was invented in the 1970s, and was a solution to the problem of shared secrets. It is a pillar of modern internet security; for example, every time we connect to an HTTPS website, a public key transaction takes place.</p><p>Public key cryptography uses the concept of a keypair; a private key that is stored securely with the user, and a public key that can be shared with the server. These &quot;keys&quot; are long, random numbers that have a mathematical relationship with each other.</p></div></div></div></div></div><div class="webauthn-properties"><div class="mb-3 row"><h3>Web Authentication relies on three major properties:</h3></div><div class="row"><div class="webauthn-property col-lg-4"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="icon-row row"><img role="presentation" alt="" src="/dist/images/flexing.svg"/></div><div class="row"><h5 class="my-2">Strong</h5></div><div class="row"><div class="col-8 offset-2 col-sm-12 offset-sm-0 col-md-6 offset-md-3 col-lg-12 offset-lg-0"><p>
    Authentication is ideally backed by a Hardware Security Module, which can safely store private keys and perform the cryptographic operations needed for WebAuthn.
</p></div></div></div><div class="webauthn-property col-lg-4"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="icon-row row"><img role="presentation" alt="" src="/dist/images/scope.svg"/></div><div class="row"><h5 class="my-2">Scoped</h5></div><div class="row"><div class="col-8 offset-2 col-sm-12 offset-sm-0 col-md-6 offset-md-3 col-lg-12 offset-lg-0"><p>
A keypair is only useful for a specific origin, like browser cookies. A keypair registered at &#x27;webauthn.guide&#x27; cannot be used at &#x27;evil-webauthn.guide&#x27;, mitigating the threat of phishing.
</p></div></div></div><div class="webauthn-property col-lg-4"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="icon-row row"><img role="presentation" alt="" src="/dist/images/attested.svg"/></div><div class="row"><h5 class="my-2">Attested</h5></div><div class="row"><div class="col-8 offset-2 col-sm-12 offset-sm-0 col-md-6 offset-md-3 col-lg-12 offset-lg-0"><p>
Authenticators can provide a certificate that helps servers verify that the public key did in fact come from an authenticator they trust, and not a fraudulent source.
</p></div></div></div></div></div></div><div id="webauthn-api" class="webauthn-api section row"><div class="webauthn-hero row"><div class="webauthn-hero-left col-sm-4"><h2>Using the API</h2></div><div class="col-sm-8"><div class="webauthn-api-image-container"><img role="presentation" alt="" src="/dist/images/illi-web-authn-api.svg"/></div></div></div></div><div id="registration" class=" section row"><div class="registration-intro mx-0 mb-3 row"><div class="col-lg-7"><h3>Registering a WebAuthn Credential</h3><p>In a password-based user registration flow, a server will typically present a form to a user asking for a username and password. The password would be sent to the server for storage.</p><p>In WebAuthn, a server must provide data that binds a user to a credential (a private-public keypair); this data includes identifiers for the user and organization (also known as the &quot;relying party&quot;). The website would then use the Web Authentication API to prompt the user to create a new keypair. It is important to note that we need a randomly generated string from the server as a challenge to prevent replay attacks. </p><div class="mt-4 mb-5"><a rel="noopener" href="https://webauthn.io" target="_blank" class="btn btn-primary btn-lg w-100">See a demo at webauthn.io</a></div></div><div class="col-lg-5"><div class="no-gutters row"><div class="avatar server-avatar  col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                         col-8 offset-1"><div class="p-0 m-0 content"><span>I want to create a new account.</span></div></div><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/phone-avatar-copy.svg"/></div></div></div><div class="avatar user-avatar   col-9 col-lg-11"><div class="row"><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/browser-avatar-copy-2.svg"/></div><div class="arrow-box arrow-box-left p-2   col-8"><div class="p-0 m-0 content"><span>Sure! Send me a public key.</span></div></div></div></div><div class="avatar server-avatar new-keypair col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                        no-balloon col-8 offset-1"><div class="p-0 m-0 content"><div class="row"><div class="keypair-text-container col-8"><span>All right! Creating a new keypair.</span></div><div class="col-4"><div class="keys-container"><img role="presentation" alt="" src="/dist/images/new-keys.svg"/></div></div></div></div></div><div class="avatar-image col-3"></div></div></div><div class="avatar server-avatar created-public-key col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                         col-8 offset-1"><div class="p-0 m-0 content"><div class="row"><div class="image-column col-2"><div class="envelope-container"><img role="presentation" alt="" src="/dist/images/envelope.svg"/></div></div><div class="text-column col-10"><span>Okay, here&#x27;s the public key!</span></div></div></div></div><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/phone-avatar-copy.svg"/></div></div></div><div class="avatar user-avatar  registration-complete col-9 col-lg-11"><div class="row"><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/browser-avatar-copy-2.svg"/></div><div class="arrow-box arrow-box-left p-2   col-8"><div class="p-0 m-0 content"><span>Thanks! Registration complete.</span></div></div></div></div></div></div></div><div class=" code-row mx-0 row"><div class="syntax-highlighter-row mx-0 row"><div class="col-sm-12"><h5><code>navigator.credentials.create()</code></h5><p>A server would begin creating a new credential by calling <span class="monotype">navigator.credentials.create()</span> on the client.</p></div><div class="col-sm-8"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> credential </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">await</span><span class=""> navigator</span><span class="token punctuation">.</span><span class="">credentials</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    publicKey</span><span class="token punctuation">:</span><span class=""> publicKeyCredentialCreationOptions
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span></code></pre></div></div></div><div class="mx-0 code-row mx-0 row"><div class="col-sm-9"><p>The <code>publicKeyCredentialCreationOptions</code> object contains a number of required and optional fields that a server specifies to create a new credential for a user.</p></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> publicKeyCredentialCreationOptions </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    challenge</span><span class="token punctuation">:</span><span class=""> Uint8Array</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">        randomStringFromServer</span><span class="token punctuation">,</span><span class=""> c </span><span class="token operator">=&gt;</span><span class=""> c</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    rp</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        name</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;Duo Security&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        id</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;duosecurity.com&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    user</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        id</span><span class="token punctuation">:</span><span class=""> Uint8Array</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">            </span><span class="token string">&quot;UZSL85T9AFC&quot;</span><span class="token punctuation">,</span><span class=""> c </span><span class="token operator">=&gt;</span><span class=""> c</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        name</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;lee@webauthn.guide&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        displayName</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;Lee&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    pubKeyCredParams</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="">alg</span><span class="token punctuation">:</span><span class=""> </span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span><span class=""> type</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;public-key&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    authenticatorSelection</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        authenticatorAttachment</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;cross-platform&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    timeout</span><span class="token punctuation">:</span><span class=""> </span><span class="token number">60000</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    attestation</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;direct&quot;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> credential </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">await</span><span class=""> navigator</span><span class="token punctuation">.</span><span class="">credentials</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    publicKey</span><span class="token punctuation">:</span><span class=""> publicKeyCredentialCreationOptions
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span></code></pre></div><div class="col-lg-5"><div><div class="challenge "><p><code>challenge<!-- -->: </code>The challenge is a buffer of cryptographically random bytes generated on the server, and is needed to prevent &quot;replay attacks&quot;.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-challenge">Read the spec.</a></p></div><div class="rp "><p><code>rp<!-- -->: </code>This stands for “relying party”; it can be considered as describing the organization <!-- --> <!-- -->responsible for registering and authenticating the user. <!-- --> <!-- -->The <code>id</code> must be a subset of the domain currently in the browser. <!-- --> <!-- -->For example, a valid <code>id</code> for this page is <!-- --> <code>webauthn.guide</code>.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-rp">Read the spec.</a></p></div><div class="user "><p><code>user<!-- -->: </code>This is information about the user currently registering. <!-- --> <!-- -->The authenticator uses the <code>id</code> to associate a credential with the user. It is suggested to not use personally identifying information as the <code>id</code>, as it may be stored in an authenticator.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-user">Read the spec.</a></p></div><div class="pubKeyCredParams "><p><code>pubKeyCredParams<!-- -->: </code>This is an array of objects describing what public key types are acceptable to a server. <!-- --> <!-- -->The <code>alg</code> is a number described in the <a rel="noopener" href="https://www.iana.org/assignments/cose/cose.xhtml#algorithms" target="_blank">COSE</a> registry; for example, <code>-7</code> <!-- --> <!-- -->indicates that the server accepts Elliptic Curve public keys using a SHA-256 signature algorithm.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-pubkeycredparams">Read the spec.</a></p></div><div class="authenticatorSelection "><p><code>authenticatorSelection<!-- -->: </code>This optional object helps relying parties make further restrictions on the type of authenticators allowed for registration. In this example we are indicating we want to register a <code>cross-platform</code> authenticator (like a Yubikey) instead of <!-- --> <!-- -->a <code>platform</code> authenticator like Windows Hello or Touch ID.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-authenticatorselection">Read the spec.</a></p></div><div class="timeout "><p><code>timeout<!-- -->: </code>The time (in milliseconds) that the user has to respond to a prompt <!-- --> <!-- -->for registration before an error is returned.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-timeout">Read the spec.</a></p></div><div class="attestation "><p><code>attestation<!-- -->: </code>The <i>attestation</i> data that is returned from the authenticator has information that <a rel="noopener" href="https://w3c.github.io/webauthn/#sec-attestation-privacy" target="_blank">could be used to track users.</a> <!-- --> This option allows servers to indicate how important the attestation data is to this registration event. A value of <code>&quot;none&quot;</code> indicates that the server does not care about attestation. A value of <code>&quot;indirect&quot;</code> means that the server will allow for anonymized attestation data. <code>direct</code> means that the server wishes to receive the attestation data from the authenticator.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#attestation-conveyance">Read the spec.</a></p></div></div></div></div></div><div class=" code-row mx-0 row"><div class="mx-0 row"><div class="col-sm-9"><p>The <code>credential</code> object returned from the <code>create()</code> <!-- --> <!-- -->call is an object containing the public key and other attributes used to validate the registration event.</p></div></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="">credential</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">PublicKeyCredential </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    id</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&#x27;ADSUllKQmbqdGtpu4sjseh4cg2TxSvrbcHDTBsv4NSSX9...&#x27;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    rawId</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">59</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    response</span><span class="token punctuation">:</span><span class=""> AuthenticatorAttestationResponse </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        clientDataJSON</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">121</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        attestationObject</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">306</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    type</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&#x27;public-key&#x27;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><div><div class="id "><p><code>id<!-- -->: </code>The ID for the newly generated credential; it will be used<!-- --> <!-- -->to identify the credential when authenticating the user. The ID is provided here as a base64-encoded string.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#ref-for-dom-credential-id">Read the spec.</a></p></div><div class="rawId "><p><code>rawId<!-- -->: </code>The ID again, but in binary form.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredential-rawid">Read the spec.</a></p></div><div class="clientDataJSON "><p><code>clientDataJSON<!-- -->: </code>This represents data passed from the browser to the authenticator in order to associate the new credential with the server and browser. The authenticator provides it as a UTF-8 byte array.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dictdef-collectedclientdata">Read the spec.</a></p></div><div class="attestationObject "><p><code>attestationObject<!-- -->: </code>This object contains the credential public key, an optional attestation certificate, and other metadata used also to validate the registration event. It is binary data encoded in CBOR.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-authenticatorattestationresponse-attestationobject">Read the spec.</a></p></div></div></div></div></div><div class=" code-row mx-0 row"><div class="col-sm-8"><h5>Parsing and Validating the Registration Data</h5><p>After the <code>PublicKeyCredential</code> has been obtained, it is sent to the server for validation. The WebAuthn specification describes a <a rel="noopener" href="https://w3c.github.io/webauthn/#registering-a-new-credential" target="_blank">19-point procedure to validate the registration data</a>; what this looks like will vary depending on the language your server software is written in.</p><p>Duo Labs has provided full example projects implementing WebAuthn written in <a rel="noopener" href="https://github.com/duo-labs/py_webauthn" target="_blank">Python</a> and <a rel="noopener" href="https://github.com/duo-labs/webauthn" target="_blank">Go.</a></p></div></div><div class=" code-row mx-0 row"><div class="col-sm-7"><p><b>Example: Parsing the clientDataJSON</b></p></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token comment">// decode the clientDataJSON into a utf-8 string</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> utf8Decoder </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">new</span><span class=""> </span><span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token string">&#x27;utf-8&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> decodedClientData </span><span class="token operator">=</span><span class=""> utf8Decoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    credential</span><span class="token punctuation">.</span><span class="">response</span><span class="token punctuation">.</span><span class="">clientDataJSON</span><span class="token punctuation">)</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// parse the string as an object</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> clientDataObj </span><span class="token operator">=</span><span class=""> </span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="">decodedClientData</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="">clientDataObj</span><span class="token punctuation">)</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    challenge</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;p5aV2uHXr0AOqUk7HQitvi-Ny1....&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    origin</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;https://webauthn.guide&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    type</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;webauthn.create&quot;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><div><p>The <code>clientDataJSON</code> is parsed by converting the UTF-8 byte array <!-- --> <!-- -->provided by the authenticator into a JSON-parsable string. On this server, this (and the other <code>PublicKeyCredential</code> data) will be verified to ensure that the registration event is valid.</p><div class="challenge "><p><code>challenge<!-- -->: </code>This is the same challenge that was passed into the <code>create()</code> call. The server must validate that this returned challenge matches the one generated for this registration event.<!-- --> <!-- --> </p></div><div class="origin "><p><code>origin<!-- -->: </code>The server must validate that this &quot;origin&quot; string matches up with the origin of the application.<!-- --> <!-- --> </p></div><div class="type "><p><code>type<!-- -->: </code>The server validates that this string is in fact <code>&quot;webauthn.create&quot;</code>. If another string is provided, it indicates that the authenticator performed an incorrect operation.<!-- --> <!-- --> </p></div></div></div></div></div><div class=" code-row mx-0 row"><div class="col-sm-7"><p><b>Example: Parsing the attestationObject</b></p></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token comment">// note: a CBOR decoder library is needed here.</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> decodedAttestationObj </span><span class="token operator">=</span><span class=""> </span><span class="token constant">CBOR</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    credential</span><span class="token punctuation">.</span><span class="">response</span><span class="token punctuation">.</span><span class="">attestationObject</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="">decodedAttestationObject</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    authData</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">196</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    fmt</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&quot;fido-u2f&quot;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    attStmt</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        sig</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        x5c</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><div><div class="authData "><p><code>authData<!-- -->: </code>The <b>authenticator data</b> is here is a byte array that contains metadata about the registration event, as well as the public key we will use for future authentications.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#authenticator-data">Read the spec.</a></p></div><div class="fmt "><p><code>fmt<!-- -->: </code>This represents the <b>attestation format</b>. Authenticators can provide attestation data in a number of ways; this indicates how the server should parse and validate the attestation data.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#attestation-statement-format">Read the spec.</a></p></div><div class="attStmt "><p><code>attStmt<!-- -->: </code>This is the <b>attestation statement</b>. This object will look different depending on the attestation format indicated. In this case, we are given a signature <code>sig</code> and attestation certificate <code>x5c</code>. Servers use this data to cryptographically <i>verify</i> the credential public key came from the authenticator. Additionally, servers can use the certificate to reject authenticators that are believed to be weak.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#attestation-statement">Read the spec.</a></p></div></div></div></div></div><div class="mx-0 row"><div class="col-sm-7"><p><b>Example: Parsing the authenticator data</b></p></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> </span><span class="token punctuation">{</span><span class="">authData</span><span class="token punctuation">}</span><span class=""> </span><span class="token operator">=</span><span class=""> decodedAttestationObject</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// get the length of the credential ID</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> dataView </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">new</span><span class=""> </span><span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token keyword">new</span><span class=""> </span><span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> idLenBytes </span><span class="token operator">=</span><span class=""> authData</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class="">idLenBytes</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">(</span><span class="">value</span><span class="token punctuation">,</span><span class=""> index</span><span class="token punctuation">)</span><span class=""> </span><span class="token operator">=&gt;</span><span class=""> dataView</span><span class="token punctuation">.</span><span class="token function">setUint8</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">        index</span><span class="token punctuation">,</span><span class=""> value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> credentialIdLength </span><span class="token operator">=</span><span class=""> dataView</span><span class="token punctuation">.</span><span class="token function">getUint16</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// get the credential ID</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> credentialId </span><span class="token operator">=</span><span class=""> authData</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token number">55</span><span class="token punctuation">,</span><span class=""> </span><span class="token number">55</span><span class=""> </span><span class="token operator">+</span><span class=""> credentialIdLength</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// get the public key object</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> publicKeyBytes </span><span class="token operator">=</span><span class=""> authData</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token number">55</span><span class=""> </span><span class="token operator">+</span><span class=""> credentialIdLength</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// the publicKeyBytes are encoded again as CBOR</span><span class="">
</span></span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> publicKeyObject </span><span class="token operator">=</span><span class=""> </span><span class="token constant">CBOR</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    publicKeyBytes</span><span class="token punctuation">.</span><span class="">buffer</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class="">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="">publicKeyObject</span><span class="token punctuation">)</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token number">1</span><span class="token punctuation">:</span><span class=""> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token number">3</span><span class="token punctuation">:</span><span class=""> </span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class=""> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class=""> </span><span class="token operator">...</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class=""> </span><span class="token operator">...</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><div><p>The <code>authData</code> is a byte array described in the spec. Parsing it will involve slicing bytes from the array and converting them into usable objects.</p><p>The <code>publicKeyObject</code> retrieved at the end is an object encoded in a standard called <a rel="noopener" href="https://www.iana.org/assignments/cose/cose.xhtml#algorithms" target="_blank">COSE</a>, which is a concise way to describe the credential public key and the metadata needed to use it.</p><div class="1 "><p><code>1<!-- -->: </code>The <code>1</code> field describes the key type. The value of <code>2</code> indicates that the key type is in the Elliptic Curve format.<!-- --> <!-- --> </p></div><div class="3 "><p><code>3<!-- -->: </code>The <code>3</code> field describes the algorithm used to generate authentication signatures. The <code>-7</code> value indicates this authenticator will be using ES256.<!-- --> <!-- --> </p></div><div class="-1 "><p><code>-1<!-- -->: </code>The <code>-1</code> field describes this key&#x27;s &quot;curve type&quot;. The value <code>1</code> indicates the that this key uses the &quot;P-256&quot; curve.<!-- --> <!-- --> </p></div><div class="-2 "><p><code>-2<!-- -->: </code>The <code>-2</code> field describes the x-coordinate of this public key.<!-- --> <!-- --> </p></div><div class="-3 "><p><code>-3<!-- -->: </code>The <code>-3</code> field describes the y-coordinate of this public key.<!-- --> <!-- --> </p></div></div></div></div><div class="col-sm-7"><p>If the validation process succeeded, the server would then store the <code>publicKeyBytes</code> and <code>credentialId </code>in a database, associated with the user. </p></div></div></div><div id="authentication" class=" section row"><div class="authentication-intro mx-0 row"><div class="col-lg-7"><h3>Authenticating with a WebAuthn Credential</h3><p>After registration has finished, the user can now be authenticated. During authentication an<i> assertion</i> is created, which is proof that the user has possession of the private key. This assertion contains a <i>signature</i> created using the private key. The server uses the public key retrieved during registration to verify this signature.</p><div class="mt-4 mb-5"><a rel="noopener" href="https://webauthn.io" target="_blank" class="btn btn-primary btn-lg w-100">See a demo at webauthn.io</a></div></div><div class="col-lg-5"><div class="avatar server-avatar  col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                         col-8 offset-1"><div class="p-0 m-0 content"><p class="ml-4 mb-0 text-left">I want to sign in.</p></div></div><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/phone-avatar-copy.svg"/></div></div></div><div class="avatar user-avatar  please-sign-data-avatar col-9 col-lg-11"><div class="row"><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/browser-avatar-copy-2.svg"/></div><div class="arrow-box arrow-box-left p-2   col-8"><div class="p-0 m-0 content"><div class="please-sign-data row"><div class="col-9"><span>Please sign this data so I really know it&#x27;s you.</span></div><div class="p-0 col-3"><div class="data-envelope-container"><img role="presentation" alt="" src="/dist/images/data-envelope.svg"/></div></div></div></div></div></div></div><div class="avatar server-avatar creating-signature-avatar text-left col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                        no-balloon col-8 offset-1"><div class="p-0 m-0 content"><div class="align-items-center row"><div class="pr-1 col-8"><p class="text-left m-0">Creating a signature with the private key...</p></div><div class="p-1 col-4"><div class="creating-signature-image p-0"><img role="presentation" alt="" src="/dist/images/signature.svg"/></div></div></div></div></div><div class="avatar-image col-3"></div></div></div><div class="avatar server-avatar created-public-key col-9 offset-2 col-lg-11 offset-lg-1"><div class="row"><div class="arrow-box arrow-box-right p-2
                         col-8 offset-1"><div class="p-0 m-0 content"><div class="align-items-center row"><div class="p-0 col-2"><div class="signed-signature-image"><img role="presentation" alt="" src="/dist/images/signed-signature-envelope.svg"/></div></div><div class="col-10"><p class="text-left m-0">Okay, here&#x27;s the signature.</p></div></div></div></div><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/phone-avatar-copy.svg"/></div></div></div><div class="avatar user-avatar   col-9 col-lg-11"><div class="row"><div class="avatar-image col-3"></div><div class="arrow-box arrow-box-left p-2  no-balloon col-8"><div class="p-0 m-0 content"><div class="align-items-center row"><div class="pr-0 col-7"><p class="m-0 text-left">Verifying the signature with the public key...</p></div><div class="d-flex align-items-center col-5"><div class="verifying-signature"><img role="presentation" alt="" src="/dist/images/verifying-signature.svg"/></div></div></div></div></div></div></div><div class="avatar user-avatar   col-9 col-lg-11"><div class="row"><div class="avatar-image col-3"><img role="presentation" alt="" src="/dist/images/browser-avatar-copy-2.svg"/></div><div class="arrow-box arrow-box-left p-2   col-8"><div class="p-0 m-0 content"><p class="text-left m-0">Great! This checks out. You can sign in.</p></div></div></div></div></div></div><div class=" code-row mx-0 row"><div class="syntax-highlighter-row mx-0 row"><div class="col-sm-12"><h5><code>navigator.credentials.get()</code></h5><p>During authentication the user proves that they own the private key they registered with. <!-- --> <!-- -->They do so by providing an <code>assertion</code>, which is generated by calling <code>navigator.credentials.get()</code> on the client. This will retrieve the credential generated during registration with a signature included.</p></div><div class="col-sm-8"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> credential </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">await</span><span class=""> navigator</span><span class="token punctuation">.</span><span class="">credentials</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    publicKey</span><span class="token punctuation">:</span><span class=""> publicKeyCredentialRequestOptions
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span></code></pre></div></div></div><div class=" code-row mx-0 row"><div class="mx-0 row"><div class="col-sm-9"><p>The <code>publicKeyCredentialCreationOptions</code> object contains a number of required and optional fields that a server specifies to create a new credential for a user.</p></div></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> publicKeyCredentialRequestOptions </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    challenge</span><span class="token punctuation">:</span><span class=""> Uint8Array</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">        randomStringFromServer</span><span class="token punctuation">,</span><span class=""> c </span><span class="token operator">=&gt;</span><span class=""> c</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    allowCredentials</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        id</span><span class="token punctuation">:</span><span class=""> Uint8Array</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">            credentialId</span><span class="token punctuation">,</span><span class=""> c </span><span class="token operator">=&gt;</span><span class=""> c</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        type</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&#x27;public-key&#x27;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        transports</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">[</span><span class="token string">&#x27;usb&#x27;</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&#x27;ble&#x27;</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&#x27;nfc&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    timeout</span><span class="token punctuation">:</span><span class=""> </span><span class="token number">60000</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> assertion </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">await</span><span class=""> navigator</span><span class="token punctuation">.</span><span class="">credentials</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    publicKey</span><span class="token punctuation">:</span><span class=""> publicKeyCredentialRequestOptions
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div><div class="col-lg-5"><div><div class="challenge "><p><code>challenge<!-- -->: </code>Like during registration, this must be cryptographically random bytes generated on the server.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialrequestoptions-challenge">Read the spec.</a></p></div><div class="allowCredentials "><p><code>allowCredentials<!-- -->: </code>This array tells the browser which credentials the server would like the user to authenticate with. The <code>credentialId</code> retrieved and saved during registration is passed in here. The server can optionally indicate what <i>transports</i> it prefers, like USB, NFC, and Bluetooth.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialrequestoptions-allowcredentials">Read the spec.</a></p></div><div class="timeout "><p><code>timeout<!-- -->: </code>Like during registration, this optionally indicates the time (in milliseconds) that the user has to respond to a prompt for authentication.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredentialrequestoptions-timeout">Read the spec.</a></p></div></div></div></div></div><div class=" code-row mx-0 row"><div class="mx-0 row"><div class="col-sm-9"><p>The <code>assertion</code> object returned from the <!-- --> <code>get()</code> call is again a <code>PublicKeyCredential</code> object. It is slightly different from the object we received during registration; in particular, it includes a <code>signature</code> member, and does not include the public key.</p></div></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="">assertion</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">PublicKeyCredential </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    id</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&#x27;ADSUllKQmbqdGtpu4sjseh4cg2TxSvrbcHDTBsv4NSSX9...&#x27;</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    rawId</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">59</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    response</span><span class="token punctuation">:</span><span class=""> AuthenticatorAssertionResponse </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">        authenticatorData</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">191</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        clientDataJSON</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">118</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        signature</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">        userHandle</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">    type</span><span class="token punctuation">:</span><span class=""> </span><span class="token string">&#x27;public-key&#x27;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><div><div class="id "><p><code>id<!-- -->: </code>The identifier for the credential that was used to generate the authentication assertion.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#ref-for-dom-credential-id">Read the spec.</a></p></div><div class="rawId "><p><code>rawId<!-- -->: </code>The identifier again, but in binary form.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-publickeycredential-rawid">Read the spec.</a></p></div><div class="authenticatorData "><p><code>authenticatorData<!-- -->: </code>The <b>authenticator data</b> is similar to the <i>authData</i> received during registration, with the notable exception that the public key is not included here. It is another item used during authentication as source bytes to generate the assertion signature.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#authenticator-data">Read the spec.</a></p></div><div class="clientDataJSON "><p><code>clientDataJSON<!-- -->: </code>As during registration, the <b>clientDataJSON</b> is a collection of the data passed from the browser to the authenticator. It is one of the items used during authentication as the source bytes to generate the signature.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dictdef-collectedclientdata">Read the spec.</a></p></div><div class="signature "><p><code>signature<!-- -->: </code>The signature generated by the private key associated with this credential. On the server, the public key will be used to verify that this signature is valid.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-authenticatorassertionresponse-signature">Read the spec.</a></p></div><div class="userHandle "><p><code>userHandle<!-- -->: </code>This field is optionally provided by the authenticator, and represents the <code>user.id </code>that was supplied during registration. It can be used to relate this assertion to the user on the server. It is encoded here as a UTF-8 byte array.<!-- --> <!-- --> <a target="_blank" href="https://w3c.github.io/webauthn/#dom-authenticatorassertionresponse-userhandle">Read the spec.</a></p></div></div></div></div></div><div class="mx-0 row"><div class="col-lg-8"><h5>Parsing and Validating the Authentication Data</h5><p>After the assertion has been obtained, it is sent to the server for validation. After the authentication data is fully validated, the signature is <i>verified</i> using the public key stored in the database during registration.</p><p>See these projects by Duo Labs for examples of validating the authentication data on the server, written in <a rel="noopener" href="https://github.com/duo-labs/py_webauthn" target="_blank">Python</a> and <a rel="noopener" href="https://github.com/duo-labs/webauthn" target="_blank">Go.</a></p></div></div><div class=" code-row mx-0 row"><div class="col-sm-7"><p><b>Example: Verifying the assertion signature on the server (pseudo-code)</b></p></div><div class="syntax-highlighter-row mx-0 row"><div class="col-lg-7"><pre class="language-javascript"><code><span class=""><span class="token keyword">const</span><span class=""> storedCredential </span><span class="token operator">=</span><span class=""> </span><span class="token keyword">await</span><span class=""> </span><span class="token function">getCredentialFromDatabase</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    userHandle</span><span class="token punctuation">,</span><span class=""> credentialId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> signedData </span><span class="token operator">=</span><span class=""> </span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    authenticatorDataBytes </span><span class="token operator">+</span><span class="">
</span></span><span class=""><span class="">    hashedClientDataJSON</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token keyword">const</span><span class=""> signatureIsValid </span><span class="token operator">=</span><span class=""> storedCredential</span><span class="token punctuation">.</span><span class="">publicKey</span><span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">    signature</span><span class="token punctuation">,</span><span class=""> signedData</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token keyword">if</span><span class=""> </span><span class="token punctuation">(</span><span class="">signatureIsValid</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token string">&quot;Hooray! User is authenticated! 🎉&quot;</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span><span class=""> </span><span class="token keyword">else</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token keyword">return</span><span class=""> </span><span class="token string">&quot;Verification failed. 😭&quot;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></div><div class="col-lg-5"><p>Verification will look different depending on the language and cryptography library used on the server. However, the general procedure remains the same.</p><ul><li>The server retrieves the public key object associated with the user</li><li>The server uses the public key to verify the signature, which was generated using the<code>authenticatorData</code> bytes and a SHA-256 hash of the <code>clientDataJSON</code></li></ul></div></div></div></div><div id="looking-ahead" class=" section row"><div class="conclusion-section section"><div class="conclusion-image"><img role="presentation" alt="" src="/dist/images/illi-conclusion.svg"/></div><div class="mt-3 col-lg-6 offset-lg-6"><h2>Looking Ahead</h2><p>While Web Authentication is an important tool,<!-- --> <!-- -->it is always important to remember that security is not a single technology;<!-- --> <!-- -->it is a <i>way of thinking</i> that should be incorporated into every step of how software<!-- --> <!-- -->is designed and developed. Web Authentication can be an important part of this process,<!-- --> <!-- -->by forcing 80% of hacking attacks to either adapt or die.</p></div></div><div class="section about-suby mx-0 row"><div class="suby-image-container col-md-5 col-lg-4 offset-lg-2"><div><img role="presentation" alt="" src="/dist/images/suby-placeholder.svg"/></div></div><div class="col-md-7 col-lg-5"><h5>Suby Raman</h5><p>Suby is a software engineer at Duo Security, working on the team responsible<!-- --> <!-- -->for Duo&#x27;s Authentication Prompt. He has helped drive<!-- --> <!-- -->Web Authentication development at Duo.</p><p>Notably, he has contributed over 175 custom emoji to Duo&#x27;s Slack workspace.</p><p class="twitter-link"><a rel="noopener" href="https://twitter.com/subyraman" target="_blank"><svg aria-label="Link to Suby Raman&#x27;s Twitter Page" role="img" class="twitter-logo" viewBox="0 0 300.00006 244.18703"><title>Link To Suby Raman&#x27;s Twitter page</title><g transform="translate(-539.17946,-568.85777)" id="layer1"><path id="path3611" d="m 633.89823,812.04479 c 112.46038,0 173.95627,-93.16765 173.95627,-173.95625 0,-2.64628 -0.0539,-5.28062 -0.1726,-7.90305 11.93799,-8.63016 22.31446,-19.39999 30.49762,-31.65984 -10.95459,4.86937 -22.74358,8.14741 -35.11071,9.62551 12.62341,-7.56929 22.31446,-19.54304 26.88583,-33.81739 -11.81284,7.00307 -24.89517,12.09297 -38.82383,14.84055 -11.15723,-11.88436 -27.04079,-19.31655 -44.62892,-19.31655 -33.76374,0 -61.14426,27.38052 -61.14426,61.13233 0,4.79784 0.5364,9.46458 1.58538,13.94057 -50.81546,-2.55686 -95.87353,-26.88582 -126.02546,-63.87991 -5.25082,9.03545 -8.27852,19.53111 -8.27852,30.73006 0,21.21186 10.79366,39.93837 27.20766,50.89296 -10.03077,-0.30992 -19.45363,-3.06348 -27.69044,-7.64676 -0.009,0.25652 -0.009,0.50661 -0.009,0.78077 0,29.60957 21.07478,54.3319 49.0513,59.93435 -5.13757,1.40062 -10.54335,2.15158 -16.12196,2.15158 -3.93364,0 -7.76596,-0.38716 -11.49099,-1.1026 7.78383,24.2932 30.35457,41.97073 57.11525,42.46543 -20.92578,16.40207 -47.28712,26.17062 -75.93712,26.17062 -4.92898,0 -9.79834,-0.28036 -14.58427,-0.84634 27.05868,17.34379 59.18936,27.46396 93.72193,27.46396"></path></g></svg></a><a rel="noopener" href="https://twitter.com/subyraman" target="_blank">@subyraman</a></p></div></div><div class="section further-reading"><div class="mx-0 further-reading-header row"><h2>Further Reading</h2></div><div class="reading-items mx-0 row"><div class="reading-item webauthn-property col-lg-4 offset-lg-0"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="reading-item-text-container row"><h5><a rel="noopener" href="https://duo.com/blog/developments-to-webauthn-and-the-fido2-framework" target="_blank">Developments to WebAuthn and the FIDO2 Framework</a></h5></div><div class="row"><p><span>There&#x27;s been a massive amount of progress made by both vendors and the <!-- --> <!-- -->authors of Web Authentication to bring this spec into usage in browsers and <!-- --> <!-- -->websites - here&#x27;s what&#x27;s new in WebAuthn and FIDO2.</span></p></div><div class="row"></div></div><div class="reading-item webauthn-property col-lg-4 offset-lg-0"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="reading-item-text-container row"><h5><a rel="noopener" href="https://duo.com/blog/the-history-of-biometric-authentication" target="_blank">The History of Biometric Authentication</a></h5></div><div class="row"><p><span>While Duo is extremely bullish about the security properties of U2F,<!-- --> <!-- -->we think that the biggest change in strong authentication is coming soon.<!-- --> <!-- -->Get a look back at biometric authentication and how it&#x27;s evolved over the years.</span></p></div><div class="row"></div></div><div class="reading-item webauthn-property col-lg-4 offset-lg-0"><div class="property-oval"><img role="presentation" alt="" src="/dist/images/oval-6.svg"/></div><div class="reading-item-text-container row"><h5><a rel="noopener" href="https://duo.com/blog/the-passwordless-future-is-here-are-you-ready" target="_blank">The Passwordless Future is Here: Are You Ready?</a></h5></div><div class="row"><p><span>James Barclay and Nick Steele recently shared their thoughts on a <!-- --> <!-- -->passwordless future during a Twitter chat with Yubico. Get their insights on the <!-- --> <!-- -->pain points of passwords, their hopes for the future, and explore some of our resources around <!-- --> <!-- -->industry advancements paving the way, like passwordless authentication, <!-- --> <!-- -->multi-factor authentication and WebAuthn.</span></p></div><div class="row"></div></div></div><div class="mx-0 view-all row"><h5><a rel="noopener" href="https://duo.com/blog/tags/web-authentication" target="_blank">View all</a></h5></div></div><div class="sponsored-by row"><div class="sponsored-by-box"><p>Sponsored by</p><a rel="noopener" href="https://duo.com" target="_blank"><img class="mb-3" role="presentation" alt="Duo Security" src="/dist/images/duo-logo-green@3x.png"/></a><a rel="noopener" href="https://cisco.com" target="_blank"><img role="presentation" alt="Cisco" src="/dist/images/kq-b-sj-a-7-q@3x.png"/></a></div></div></div></main></div></div></div>
              
        </div>

        <script src="/dist/js/index.js" type="text/javascript"></script>
        <script src="/dist/js/vendor.index.js" type="text/javascript"></script>
    </body>
</html>